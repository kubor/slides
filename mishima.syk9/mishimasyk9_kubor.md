<!-- $theme: gaia -->
<!-- page_number: true -->
<!-- $size: 4:3 -->


創薬ちゃんの化合物詠唱機能について
===

###### mishima.syk #10


###### ソーシャル創薬美少女
###### ![](https://pbs.twimg.com/profile_images/875387284018704384/TRfCgYxF_bigger.jpg) [@kubor_](https://twitter.com/kubor_)
---

# はじめまして
- 某ソーシャルゲーム運営したり球団経営したりしてるIT企業のバイオインフォマティシャン
- NGSデータの解析がメイン
- 前回の mishima.syk #9 でIT創薬デビュー
- 美少女は心の持ちよう

---

### RDKitユーザー会作ったりしてます

![](https://user-images.githubusercontent.com/7918702/27967309-84eba2f0-637d-11e7-94cd-3ac5d68505c1.png)
https://rdkit-users-jp.github.io/

---

# 今日話したいこと

- 創薬ちゃんのこと
- 創薬ちゃんの化合物詠唱機能のこと
    - Twitter bot

---

# 創薬ちゃんって？
<img src="https://user-images.githubusercontent.com/7918702/27967611-a8f87c44-637e-11e7-83bc-ca11b2fd485a.png" align=right width=280>

- すごく可愛い
- ケミカルスペースを旅してる
- かわいい
- 創薬研究者
- とにかくかわいい
- Twitter: [@souyakuchan](https://twitter.com/souyakuchan)

---

# 創薬ちゃんTwitterモーメント
- 時事ネタを含めた創薬化学全般の話題を提供
	- [BRAF を例にキナーゼの活性化機構について
](https://twitter.com/i/moments/824262531564699648)
	- [エンドセリン type B 受容体の活性化機構](https://twitter.com/i/moments/789800984528551936)
	- [ボツリヌス毒素](https://twitter.com/i/moments/850626127181643776)
	- [抗マラリア薬](https://twitter.com/i/moments/839516326704009216)

---

#### なんでも知ってる創薬ちゃん
<img src="https://user-images.githubusercontent.com/7918702/27968022-5180f50c-6380-11e7-8f38-1c8f15726c64.png" width=500>

###### 難しいけどわからないわけじゃない

<img src="https://user-images.githubusercontent.com/7918702/27968046-6f474960-6380-11e7-8aa4-717eda61d7e8.png" width=500>

[重水素化医薬品 - 創薬ちゃんTwitterモーメントより](https://twitter.com/i/moments/852056343229997056)

---
###### どうやら活動資金は科研費で戦ってるらしい
![](https://user-images.githubusercontent.com/7918702/27968492-3731ef88-6382-11e7-95ac-8d4bc8f77fb2.png)

---

# うーん。
# 創薬ちゃんかわいい！！
# 創薬ちゃんをもっと知ってもらいたい

---

# そうだ！！
# 最近流行りのbot機能で遊んでもらえたらいいのでは

# とりあえず作って早速交渉してみた

---

![](https://pbs.twimg.com/profile_images/875387284018704384/TRfCgYxF_bigger.jpg) 化合物詠唱術に興味はないかなあ？
![](https://pbs.twimg.com/profile_images/778128318847655936/k3uTaHNZ_bigger.jpg) 面白そうだ。詳しく聞かせていただこう。
![](https://pbs.twimg.com/profile_images/875387284018704384/TRfCgYxF_bigger.jpg) （かわいい・・・）フォロワーからのリプライを構造式で打ち返すのです。
![](https://pbs.twimg.com/profile_images/778128318847655936/k3uTaHNZ_bigger.jpg) なるほど。具体的にはどうするんだ。
![](https://pbs.twimg.com/profile_images/875387284018704384/TRfCgYxF_bigger.jpg) あ、じゃあですねここにアクセスして、出て来るPINコードを入力してください。そうすると僕が、創薬ちゃんのかわりにツイート出来るので、つまり僕が創薬ちゃんの中に入ると言うか、その、1つになれるというか。うへ、うへへへへ。

---

# SMILESキーを含むTweetを受け取って構造式を描くbot機能を実装した

---

# すごい！！
創薬ちゃんが構造式を描いてくれている！！！

<img src="https://user-images.githubusercontent.com/7918702/27969212-f9882e92-6384-11e7-878b-e444ad6ebaa0.png" width=420>

<img src="https://user-images.githubusercontent.com/7918702/27969235-11c4f9a4-6385-11e7-8f1d-9733c5534378.png" width=420>

---

<img src="https://user-images.githubusercontent.com/7918702/27969058-6495d514-6384-11e7-99d5-395827198db1.png" width=550 align=right>

## 華麗にbot機能を身に付けた創薬ちゃん


---

# 構造式を描くのはたのしい
- SMILESを投げると構造式を描いてくれるだけ
- 単純だけどTwitterに無い機能
- 全ユーザーが待ち望んだbotが誕生
- 創薬ちゃんかわいい:heart:

---

<img src="https://user-images.githubusercontent.com/7918702/27969576-5610ff4e-6386-11e7-8eb8-2f6a54cb4284.png" width=480 align=right>

## 確かにこういうのもSMILESで書けるけども・・・

---

# 大喜利が始まる

---

<img src="https://user-images.githubusercontent.com/7918702/27969467-ee2d5b48-6385-11e7-92d6-53ae83ae93e6.png" width=580 align=right>
<img src="https://user-images.githubusercontent.com/7918702/27969503-0e3bbe5c-6386-11e7-8df2-4ed29849582e.png" width=580 align=right>

### ChemDrawかなにかでお絵描きしてからSMILES貼り付けたな？

---

<img src="https://user-images.githubusercontent.com/7918702/27969702-ddadb3de-6386-11e7-9a72-75e744a18821.png" width=600 align=right>

## 実在する化合物かどうなのかがわからない

---

<img src="https://user-images.githubusercontent.com/7918702/27969762-2808970a-6387-11e7-90bf-29005787c1c1.png" width=580 align=right>

## なるほど？

---

<img src="https://user-images.githubusercontent.com/7918702/27972974-32c67bd8-6393-11e7-8d00-ca695659b228.png" width=540 align=right>

## テトリス

---

# まだまだあるよ！
- [創薬ちゃん構造式集](https://twitter.com/i/moments/856500514095194112)
- [創薬ちゃんのメディアページ](https://twitter.com/souyakuchan/media)も楽しい

---

## IUPAC名で詠唱したい方が現れる
SMILES詠唱機能を身に付けた同日（2017/4/23）
![](https://user-images.githubusercontent.com/7918702/27969947-ebbc658c-6387-11e7-83b4-a61d09b1fdbc.png)

---

<img src="https://user-images.githubusercontent.com/7918702/27970170-c1fbf554-6388-11e7-92eb-78a5341066c5.png" width=550 align=right>

# IUPAC名で詠唱できる機能を作った

---

<img src="https://pbs.twimg.com/media/C-ver9tUwAAU_Fd.jpg" width=500 align=right>

### ベンゼンだ！

---

# #souyakuchan_magic
最近はハッシュタグを付けるようにしています
![](https://user-images.githubusercontent.com/7918702/27970286-4986d4da-6389-11e7-9cf5-bdd7ff4432ea.png)

---

# bot機能はどうだったか
- フォロワーが増えた
![](https://user-images.githubusercontent.com/7918702/27970368-8714f3d6-6389-11e7-9c7b-726848d1028a.png)

---

# bot機能はどうだったか
- ユーザーの反応がリアルタイムに返ってきて開発側としてもすごく楽しい！
- 有機の課題も助かったみたいで嬉しい

![](https://user-images.githubusercontent.com/7918702/27970463-e60b755e-6389-11e7-81bc-ec211cbd42de.png)

---

# どうやって作ったのか

- :snake: Python3 + :whale: Docker + RDKit
- [ddquest/chem_bot](https://github.com/ddquest/chem_bot)

![](https://user-images.githubusercontent.com/7918702/27972710-42debd92-6392-11e7-93f7-3b115006deee.png)

---

# 仕組み

- :bird: Twitter Userstreamingを監視（[Tweepy](https://github.com/tweepy/tweepy)）
- :bulb: メンションを受けると[RDKit](http://www.rdkit.org/)で構造式を描画
- :speaker: IUPAC名はSMILESに変換（[OPSIN](http://opsin.ch.cam.ac.uk/)）
- :bird: JPEGバイナリ付きのツイートをTwitter APIを叩いて送信
- [#souyakuchan_magic](https://twitter.com/hashtag/souyakuchan_magic?src=hash)！

---

# :whale: Dockerで動いているよ
```
FROM kubor/alpine-rdkit:latest

MAINTAINER kubor

COPY . /chem_bot

WORKDIR /chem_bot

ENV LC_ALL=C

RUN python setup.py install && \
    (cd java/ && sh get_opsin.sh)

RUN apk update && \
    apk --no-cache add openjdk8

CMD ["python", "-u", "bin/run_twitter_client.py"]
```

---

#### RDKitが動く軽量なDocker Imageも作った

[kubor/alpine-rdkit](https://github.com/kubor/alpine-rdkit)

- Alpine Linuxベースで軽量（圧縮済みで465 MB）
- miniconda
- rdkitの動作に必要なライブラリも内包
- TRY! 
	```
    docker -it run kubor/alpine-rdkit bash
    ```
    
---

# :warning: 注意
##### [@kubor_](https://twitter.com/kubor_)は創薬ちゃんの中の人ではないし、創薬ちゃんに中の人などいません

---

# おしまい

#### 創薬ちゃん先生の今後の活躍にご期待下さい